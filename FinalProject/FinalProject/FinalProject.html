
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <title>HLRS</title>
	<!-- External Style Sheet -->
	<link rel="stylesheet" type="text/ss" href="stylesheets/assign.css" />
	<!-- Internal Style Sheet -->
	<style>
		body{
			padding: 50px;
		}
	
		h1{
			color:green;
		}
		
		ol{
			color:black;
			list-style: none;
		}
	
		
	</style>
  </head>
  
  <body>
	
    <h1>HLRS System</h1>
	
	<h2>Project Overview</h2>
	
	<p>The HLRS will provide a service by which the Guests can check out books for the duration of their stay. 
	This will ensure that the Guests will have a more pleasurable experience at the hotel and may return in the future. 
	A guest may choose a book from one of the Hotelâ€™s Library shelves which they may check out for the duration or their stay. </p>
	
	<p>In addition to this service, the system will also have the functionality to store information of the author, 
	release, and publisher of the book. Additionally, noteworthy quotes can be stored to be easily accessed in the future.</p>
	
	<p>The system will allow for easy modification in the future to add other rental options for the guest.</p>
	
	
	<h2>Data Specifications Overview</h2>
	
    <h3>Part A</h3>
	
	<b>Updates:</b>
	<ol>
		<li>8/1/2016: Added RentalTotal to Rental</li>
		<li>8/5/2016: Updated tr_UpdateShelfDescription to INSTEAD OF</li>
		<li>8/5/2016: Deleted AuthorFirst and AuthorLast and added AuthorName nvarchar(50) NOT NULL</li>
		<li>8/5/2016: Updated BookName to be a nvarchar(50)</li>
		<li>8/5/2016: Updated ShelfLocation to varchar(20) and ShelfDescription to a varchar(50)</li>
		<li>8/5/2016: Removed Book as a FK of Rental</li>
		<li>8/5/2016: Added sp_GetAuthor</li>
		<li>8/5/2016: Updated tr_AuthorMustExist to tr_BookMustExists</li>
		<li>8/5/2016: Updated tr_UpdateRental to tr_UpdateCheckIn</li>
		<li>8/9/2016: Added sp_GetBooks</li>
		<li>8/9/2016: Added sp_InsertBooks2 and sp_InsertBooks3 for ease of insert.</li>
		<li>8/9/2016: Deleted dbo.getBooks</li>
		
	</ol>
	
    <a href="images/HLRS_ERDiagram.jpg" target="_self"><img src="images/HLRS_ERDiagram.jpg" alt="ERDiagram" style=""></a>
    
	
    <h3>Part B: TRIGGERS</h3>
	  
    <ol>
      <li><a href="triggers/tr_UpdateShelfDescription.txt" target="_self">tr_UpdateShelfDescription</a></li>
      <li>Type: On Shelf INSTEAD OF Insert</li>
      <li>After a Shelf is inserted, this trigger puts the hotel name, from a linked server, and the shelf location in the description.</li>
    </ol>  
    <ol>
      <li><a href="triggers/tr_UpdateStatus.txt" target="_self">tr_UpdateStatus</a></li>
      <li>Type: On Rental AFTER Update</li>
      <li>Once the Rental Status changes this trigger updates the book status.</li>
    </ol>  
    <ol>
      <li><a href="triggers/tr_UpdateCheckIn.txt" target="_self">tr_UpdateCheckIn</a></li>
      <li>Type: On Rental AFTER Update</li>
      <li>When RentalCheckIn is updated, this trigger will calculate the cost, by calling dbo.calculateCost and apply sales tax from TaxLocation, </li>
	  <li>from a linked server, and store it in RentalTotal. It will then insert a record into FARMS Billing.</li>
    </ol>  
    <ol>
      <li><a href="triggers/tr_BookMustExists.txt" target="_self">tr_BookMustExist</a></li>
      <li>Type: On BookAuthor AFTER Insert/Update</li>
      <li>If an improper BookID is inserted/updated, then raise an error message.</li>
    </ol>
	
	
    <h3>Part C: STORED PROCEDURES</h3>
    
    <ol>
      <li><a href="storedProcedures/sp_UpdateRental.txt" target="_self">sp_UpdateRental</a></li>
      <li>Allows the user to update thier Rental Check In time.</li>
      <li>Input Parameter(s) : smallint(RentalID), smalldatetime(RentalCheckIn)</li>
      <li>Output Parameter(s) : RentalID</li>
    </ol>
    <ol>
      <li><a href="storedProcedures/sp_GetBooks.txt" target="_self">sp_GetBooks</a></li>
      <li>Prints all the available books on a shelf.</li>
      <li>Input Parameter(s) : smallint(ShelfID)</li>
      <li>Output Parameter(s) : ShelfID</li>
    </ol>
	<ol>
      <li><a href="storedProcedures/sp_GetAuthor.txt" target="_self">sp_GetAuthor</a></li>
      <li>Prints all the Authors attributed to a publisher.</li>
      <li>Input Parameter(s) : smallint(PublisherID)</li>
      <li>Output Parameter(s) : PublisherID</li>
    </ol>
    <ol>
      <li><a href="storedProcedures/sp_InsertBook.txt" target="_self">sp_InsertBook</a></li>
      <li>Allows the user to input a book name and up to 3 authors. The database will insert the book and the authors if they do not exist. Then it will create a BookAuthor entity for the book.</li>
      <li>Input Parameter(s) : varchar(50)(BookName),smallmoney(BookCost), varchar(50)(AuthorName), varchar(50)(AuthorName) NULL, varchar(50)(AuthorName) NULL </li>
      <li>Output Parameter(s) : BookID</li>
    </ol>
	
    <h3>Part D: USER DEFINED FUNCTIONS</h3>
    
    <ol>
      <li><a href="userDefinedFunctions/showCheckedOut.txt" target="_self">dbo.showCheckedOut</a></li>
      <li>This will utilize a cursor or dbo.getBooks and show all the checked out books in a hotel with the due dates.</li>
      <li>Input Parameter(s): smallint(HotelID)</li>
      <li>Returns__ Table with BookName/RentalCheckIn+RentalNights</li>
    </ol>
	<ol>
      <li><a href="userDefinedFunctions/printAuthors.txt" target="_self">dbo.printAuthors</a></li>
      <li>This will utilize a cursor to print all the Authors for a book in order.</li>
      <li>Input Parameter(s): smallint(BookID)</li>
      <li>Returns__ Table with BookName/List of AuthorFirst,AuthorLast</li>
    </ol>
    <ol>
      <li><a href="userDefinedFunctions/getQuote.txt" target="_self">dbo.getQuote</a></li>
      <li>This function will output all the quotes from an AuthorID input.</li>
      <li>Input Parameter(s): smallint(AuthorID)</li>
      <li>Returns__ Table with Quotes</li>
    </ol>
    <ol>
      <li><a href="userDefinedFunctions/calculateCost.txt" target="_self">dbo.calculateCost</a></li>
      <li>This function will calculate base cost of Rental by determining if it is late.</li>
      <li>Input Parameter(s): smallint(RentalID)</li>
      <li>Returns__ smallmoney</li>
    </ol>
	
	<h3>Other:</h3>
    
    <ol>
      <li><a href="other/HLRS_FinalProjectCreate.txt" target="_self">DB and Table Creation Script</a></li>
      <li><a href="other/HLRS_FinalProjectInsert.txt" target="_self">INSERT INTO Statements Sample Data</a></li>
      <li><a href="other/HLRS_FinalProjectPrograms.txt" target="_self">Stored Procedures, User Defined Functions), and Triggers of the database</a></li>
      <li><a href="other/HLRS_FinalProjectDemo.txt" target="_self">Demo Script</a></li>
    </ol>
    
  </body>
</html>